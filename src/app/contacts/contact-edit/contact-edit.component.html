<form #f="ngForm" (ngSubmit)="onSubmit(f)">
  <div class="row">
    <div class="col-md-12">
      <!-- Name -->
      <div class="form-group">
        <label for="name">Name</label>
        <input 
          type="text" 
          id="name" 
          class="form-control" 
          name="name" 
          required 
          [(ngModel)]="contact.name" 
          #name="ngModel">
      </div>

      <!-- Email -->
      <div class="form-group">
        <label for="email">Email</label>
        <input 
          type="email" 
          id="email" 
          class="form-control" 
          name="email" 
          required 
          pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" 
          [(ngModel)]="contact.email" 
          #email="ngModel">
        <div *ngIf="email.touched && !email.valid" class="alert alert-danger">
          Enter a valid email address
        </div>
      </div>

      <!-- Phone -->
      <div class="form-group">
        <label for="phone">Phone</label>
        <input 
          type="text" 
          id="phone" 
          class="form-control" 
          name="phone" 
          pattern="\D*([2-9]\d{2})(\D*)([2-9]\d{2})(\D*)(\d{4})\D*" 
          [(ngModel)]="contact.phone" 
          #phone="ngModel">
        <div *ngIf="phone.touched && !phone.valid" class="alert alert-danger">
          Enter a valid phone number
        </div>
      </div>

      <!-- Image URL -->
      <div class="form-group">
        <label for="imageUrl">Image URL</label>
        <input 
          type="text" 
          id="imageUrl" 
          class="form-control" 
          name="imageUrl" 
          [(ngModel)]="contact.imageUrl">
      </div>

      <!-- Required field warning -->
      <div *ngIf="(!name.valid && name.touched) || (!email.valid && email.touched)" class="alert alert-danger">
        The Name and Email fields are required.
      </div>
    </div>
  </div>

  <!-- Group Contacts -->
  <div class="row mt-4">
    <div class="col-md-12">
      <h4>Group Contacts</h4>
      <div
        cdkDropList
        [cdkDropListData]="groupContacts"
        class="drop-zone"
        (cdkDropListDropped)="onDrop($event)"
      >
        <div *ngFor="let contact of groupContacts; let i = index" class="d-flex align-items-center gap-2 mb-2">
          <cms-contact-item [contact]="contact"></cms-contact-item>
          <button (click)="onRemoveItem(i)" class="btn btn-danger btn-sm">X</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Form Buttons -->
  <div class="row mt-4">
    <div class="col-md-12">
      <button 
        type="submit" 
        class="btn btn-primary" 
        [disabled]="!f.valid">Save</button>
      <button 
        type="button" 
        class="btn btn-secondary" 
        (click)="onCancel()">Cancel</button>
    </div>
  </div>
</form>